from pathlib import Path
import re

src_path = Path("/mnt/data/kareblazers_after_tweaks_FIXED.html")
html = src_path.read_text(encoding="utf-8")

# 1) Remove logo image tag in hero
html = re.sub(r'\s*<img\s+class="logo"[^>]*>\s*', '\n', html, count=1, flags=re.I)

# 2) Remove Scheduling Windows section (id="schedule")
html = re.sub(r'\s*<section id="schedule">.*?</section>\s*', '\n', html, flags=re.S)

# 2b) Remove nav link to scheduling section
html = re.sub(r'\s*<a href="#schedule">Scheduling</a>\s*', '\n', html)

# 3) Remove "56+ ..." references throughout, while keeping sentence readable.
replacements = [
    # "High-hour care (typical 56+ hrs/wk) or live-in" -> "High-hour care or live-in"
    (r'High-hour care\s*\(typical\s*56\+\s*hrs?/wk\)\s*or\s*live-in', 'High-hour care or live-in'),
    # "typical plans are 56+" or "typical plans are 56+)." etc.
    (r'\s*\(typical plans are\s*56\+\)\s*', ' '),
    (r'\s*\(typical plans are\s*56\+\.\)\s*', ' '),
    # "56+ hrs/wk" anywhere
    (r'\b56\+\s*hrs?/wk\b', ''),
    (r'\b56\+\s*hours?/week\b', ''),
    (r'\b56\s*hours?/week\b', ''),
]
for pat, rep in replacements:
    html = re.sub(pat, rep, html, flags=re.I)

# Clean up double spaces and stray punctuation spacing from removals
html = re.sub(r'\s{2,}', ' ', html)
html = re.sub(r'\s+\n', '\n', html)
html = re.sub(r'\n{3,}', '\n\n', html)

# In case we removed content leaving "Minimum: 20 hours/week ." fix spacing
html = html.replace("Minimum: 20 hours/week .", "Minimum: 20 hours/week.")
html = html.replace("Minimum: 20 hours/week  Exceptions", "Minimum: 20 hours/week. Exceptions")

# Hero layout: if no logo, avoid leftover grid spacing on wide screens by switching hero wrap to 1 column.
# Update CSS grid-template-columns:auto 1fr -> 1fr
html = re.sub(r'\.hero\s*\.wrap\{display:grid;grid-template-columns:auto 1fr;gap:18px;align-items:center\}',
              '.hero .wrap{display:grid;grid-template-columns:1fr;gap:18px;align-items:center}',
              html)

out_path = Path("/mnt/data/kareblazers_after_final.html")
out_path.write_text(html, encoding="utf-8")
str(out_path)
